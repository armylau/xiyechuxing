<!-- pages/attractions/attractions.wxml - æ™¯ç‚¹åˆ—è¡¨é¡µ -->
<view class="page">
  <!-- å¤´éƒ¨ -->
  <view class="header">
    <view class="header-content">
      <text class="header-title">ğŸï¸ ç›®çš„åœ°æ™¯ç‚¹</text>
      <text class="header-subtitle">æ¢ç´¢ç²¾å½©ç›®çš„åœ°</text>
    </view>
  </view>

  <!-- åŸå¸‚é€‰æ‹©å™¨ -->
  <view class="city-bar">
    <picker bindchange="onCityChange" value="{{currentCityIndex}}" range="{{cities}}" range-key="name">
      <view class="city-picker">
        <text class="city-picker-text">{{currentCityName}}</text>
        <text class="city-picker-arrow">â–¼</text>
      </view>
    </picker>
  </view>

  <!-- æ™¯ç‚¹åˆ—è¡¨ -->
  <view class="attraction-list">
    <!-- åŠ è½½ä¸­ -->
    <view class="loading" wx:if="{{loading}}">
      <view class="spinner"></view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:elif="{{attractions.length === 0}}">
      <text class="empty-icon">ğŸï¸</text>
      <text class="empty-text">æš‚æ— æ™¯ç‚¹ä¿¡æ¯</text>
    </view>

    <!-- æ™¯ç‚¹å¡ç‰‡ -->
    <view 
      class="attraction-card"
      wx:for="{{attractions}}"
      wx:key="id"
      bindtap="openDetail"
      data-id="{{item.id}}"
    >
      <view class="card-image {{item.gradClass}}">
        <view class="image-overlay"></view>
        <text class="attraction-name">{{item.name}}</text>
        <view class="attraction-rating">
          <text>â­ {{item.rating}}</text>
        </view>
      </view>
      <view class="card-content">
        <text class="attraction-desc">{{item.desc}}</text>
        <view class="card-footer">
          <view class="ticket-price">
            <block wx:if="{{item.ticket_price === '0'}}">
              <text class="free">å…è´¹</text>
            </block>
            <block wx:else>
              <text class="price">Â¥{{item.ticket_price}}</text>
              <text class="unit">/äºº</text>
            </block>
          </view>
          <text class="view-detail">æŸ¥çœ‹è¯¦æƒ… â†’</text>
        </view>
      </view>
    </view>
  </view>
</view>
